# 第二篇 数据模型篇
## 第八章 大数据领域建模综述
### 8.1 为什么需要数据建模
- 数据模型就是数据组织和存储方法，它强调从业务、数据存取和使用角度合理存储数据。
- 数据建模的目的就是进行有序、有结构的分类和存储数据。

### 8.3 从 OLTP 和 OLAP 系统的区别看模型方法论的选择
OLTP 系统通常面向的主要数据操作是随机读写，主要采用满足3NF 的 实体关系模型存储数据，从而在事务处理中解决数据的冗余和一致性问题。
而 OLAP 系统面向的主要数据操作是批量读写，事务处理中的一致性不是 OLAP 所关注的，其主要关注数据的整合，以及在一次性的复杂大数据查询和处理中的性能，因此它需要采用一些不同的数据建模方法。

###　8.4 典型的数据仓库建模方法论
**数据库设计步骤**
数据库的设计分为以下3个步骤：

- 设计概念模型(conceptual model)。在关系型数据库中，我们使用ER图来进行概念模型的设计。ER图的作用是：表示出各个实体之间的关系，方便在下一步的逻辑模型设计时书写相应的代码。
- 设计逻辑模型(logical model)。在这一步中，我们需要将人可以读懂的ER模型转化为机器可以读懂的逻辑模型，即我们需要书写数据库模式(SQL schema)来实现我们的模型。
- 物理模型设计(physical model)。物理模型关乎于数据库在储存器中如何存放，这一步的实现交由数据库管理系统(DBMS)进行。

**数据库设计三大范式**
第一范式(确保每列保持原子性)；
第二范式(确保表中的每列都和主键相关)；
第三范式(确保每列都和主键列直接相关,而不是间接相关)；
> 第一范式（1NF）：要求数据库表的每一列都是不可分割的原子数据项。
第一范式是最基本的范式。如果数据库表中的所有字段值都是不可分解的原子值，就说明该数据库表满足了第一范式。
第二范式（2NF）：第二范式需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）。
在1NF的基础上，非码属性必须完全依赖于候选码（在1NF基础上消除非主属性对主码的部分函数依赖）
第三范式（3NF）：第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。
在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）
#### 8.4.1 ER 模型
ER(实体联系)模型中有三个主要的概念：实体集、属性、联系集。
- 实体集对于数据库中的一个表，一个视图对应表中的一行；
- 一个属性对应数据库表中的一列，也就是一个字段；
- 联系集是表与表之间的联系
  - 一对一关联：两表间实体一对一对应；
  - 一对多：主表一个实体对应从表多条实体；
  - 多对多：多对多关联需要一个中间表，两张表和中间表分别形成一对多关系。

ER模型建模分三个阶段：
- 高层模型：是一个高度抽象的模型，描述主要的主题与主题间的关系；
- 中层模型：在高层模型基础上对主题的细化；
- 物理模型（底层模型）：在中层模型的基础上，考虑物理存储与性能的设计，以及进行表的合并、分区设计。

应用场景：
- ER模型是数据库设计的理论基础，当前几乎所有的OLTP系统设计都采用了这种建模方式；
- Bill Inom提出的数仓理论推荐采用ER关系模型建模；
- 数仓分层架构的ODS、DWD也大多采用ER关系模型设计。
#### 8.4.2 维度模型

#### 8.4.3 Data Vault 模型

#### 8.4.4 Anchor 模型